# 인증 방식

- 사용자 인증
  - 나의 서비스를 사용할 수 있는 사람인가 ?
  - 즉, 회원가입 한 사람인가?
- 권한 및 허가
  - 유저에게 서비스의 어떤 기능까지 허락하는가 ?
  - 즉, 그룹이나 관리자 계정 등 특정 권한이 존재할 때 구분하기 위해 사용

## 사용자 인증

- 사용자 인증은 크게 

- `BasicAuthentication`
  - 가장 기본적인 인증 방식. 
  - 클라이언트가 매 요청마다 사용자 정보(id, pw)를 서버로 보냄
    - 사용자 이름과 비밀번호를 base64로 인코딩하여 Authorization 헤더에 넣어서 요청을 보냄
  - id, pw 가 모두 패킷에 노출되므로 보안이 거의 없음. 그냥 테스트 전용으로 사용

- `SessionAuthentication`
  - django 가 default 로 사용하는 방식
  ```
  1. 클라이언트: 로그인 시도
  2. 서버: 로그인 정상 여부 판단. 정상일 시 세션 생성 및 세션 정보 DB 에 저장. 
    - 이 세션에는 사용자 정보, 권한 정보, 만료 시간 등이 저장됨
  3. 서버: 클라이언트에게 세션ID 발급. 쿠키나 URL 매개변수에 저장
  4. 클라이언트: 서버로 부터 받은 세션ID 를 쿠키나 스토리지에 저장. 요청 시 마다 세션ID 를 포함하여 전송
  ```
  - 세션 정보 삭제는 다음 두 가지 경우에 발생합니다.
    - 로그아웃
    - 세션 만료 기간이 지났을 때

- `RemoteUserAuthentication`
  - 외부 시스템에서 인증된 사용자 정보를 Django 에서 활용하는 방법
  - 예를 들어, Nginx 등의 웹 서버를 따로 두었다고 가정했을 때, nginx 에서 인증된 사용자 정보를 그대로 가져다 쓸 때 사용함
  - 장고에서 인증 절차를 구현하지 않기 때문에 속도가 빠르지만, 보안 이슈 발생 가능성이 있음

- `TokenAuthentication`
  - Django 의 토큰 인증 방식.
  - 서버: `Token` 모델에 저장
  - 토큰에 담긴 정보
    - user id: 사용자 식별자
    - expiration time: 토큰의 만료 시간
    - signature: 토큰 인증 시 사용하는 서명. 비밀키를 사용하여 생성. 클라이언트가 변조되었는 지 검증할 때 사용.
  - 토큰 인증 vs 세션 인증
    - Stateless: 토큰 인증 방식은 세션을 사용하지 않으므로, 상태가 없다. 즉, 서버 측에서 상태를 유지할 필요가 없다. 이로 인해 서버의 부하를 줄이고, 서버가 확장 가능해짐


## 권한 및 허가